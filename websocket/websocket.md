
---

# 🛡️ 脆弱性サイト 説明書
---

> ⚠️ **注意：このサイトは必ずローカル環境でのみ使用してください。**
> 本サイトで紹介する脆弱性や攻撃手法は、**セキュリティ学習目的**に限定しています。
> **実際のWebサイトでは絶対に使用しないでください。**
> 法律違反となる可能性があり、重大なトラブルにつながるおそれがあります。
> 倫理と法律を守り、正しくご活用ください。




---

本サイトは、筆者が個人で作成した**セキュリティ学習用のローカルテスト環境**です。
一部、脆弱性や構成、説明に誤りがある場合がありますので、あくまで参考程度にご利用ください。

---




## ✅ サーバーの起動方法

1. WebSocket用のディレクトリに移動して、PHPのビルトインサーバーを起動：

   ```bash
   php -S localhost:5010
   ```

2. WebSocketサーバーを起動：

   ```bash
   php run_server.php
   ```

> 💡 推奨環境：Linux

---

## 🗂 ページ構成と脆弱性一覧

### 🔐 ログインページ

**ファイル**：

* `login.php`
* `signup.php`

**脆弱性：SQLインジェクション**
例：ユーザー名に以下を入力するとログイン可能になります。

```sql
1' or '1' = '1';--
```

---

### 🧑‍💼 プロフィールページ

**ファイル**：

* `profile.php`
* `change_profile.php`

**脆弱性：アクセス制御の不備**
例：URLの`id`パラメータを変更することで、他のユーザーのプロフィール情報にアクセスできます。

```
/change_profile.php?id=1
```

---

### 🛒 ショッピングページ

**ファイル**：

* `shopping.php`
* `cart.php`

**脆弱性①：SQLインジェクション**
例：検索欄に以下を入力すると、本来表示されない商品が表示されます。

```sql
1' or '1' = '1';--
```

**脆弱性②：反射型XSS**
例：検索欄に以下を入力するとJavaScriptが実行されます。

```html
<script>alert("xss")</script>
```

さらに、クッキー情報も取得可能です：

```html
<script>alert(document.cookie);</script>
```

---

### 🧾 購入履歴ページ

**ファイル**：

* `purchase_history.php`

**脆弱性：SQLインジェクション**
例：日付選択後、URLの`date`パラメータを改ざんすると他のユーザーの購入履歴を閲覧できます。

```
/purchase_history.php?date=1' or '1' = '1';--
```

---

### 💬 掲示板ページ

**ファイル**：

* `keizibann.php`

**脆弱性：格納型XSS**
例：以下のようなコードをメッセージ欄に投稿すると、ページ表示時にJavaScriptが実行されます。

```html
<img src="x" onerror="alert(1)">
```

---

### 🍪 セッションハイジャック

攻撃者が掲示板などに悪意あるリンクを投稿し、ユーザーがクリックすることで
セッションID（例：`PHPSESSID`）が盗まれます。
盗まれたセッションIDを使って、開発者ツールなどで**正規ユーザーになりすまし**が可能です。

---

### 🌐 クロスサイト WebSocket ハイジャック

攻撃者が正規ユーザーの`PHPSESSID`を盗み、それを**WebSocket接続時の認証に使用**することで、
WebSocketサーバー（例：`localhost:7010`）に対して**正規ユーザーとしてなりすまし操作が可能**になります。

> 💻 `stole/`ディレクトリに、この攻撃のサンプルコードがあります。
> 攻撃者はセッションIDを自分のブラウザに設定せず、**コード上で直接送信して接続するケースもあります**。

---

### 📩 問い合わせページ

**ファイル**：

* `toiawase.php`

**脆弱性：OSコマンドインジェクション**
例：メッセージ欄に以下を入力すると、サーバー上のファイル一覧が表示されます。

```bash
;ls
```

---

## 🔐 最後に：セキュリティ意識を高めよう

本サイトで扱っている脆弱性は、**攻撃の仕組みを学び、防御の知識を深める**ためのものです。
**絶対に悪用せず、倫理的かつ合法的な学習を心がけましょう。**

---

